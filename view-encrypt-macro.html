<!DOCTYPE html>
<html lang="en">
    <head>
      <link rel="stylesheet" href="//aui-cdn.atlassian.com/aui-adg/5.4.3/css/aui.css" media="all">
    <!--[if lt IE 9]><link rel="stylesheet" href="//aui-cdn.atlassian.com/aui-adg/5.4.3/css/aui-ie.css" media="all"><![endif]-->
    <!--[if IE 9]><link rel="stylesheet" href="//aui-cdn.atlassian.com/aui-adg/5.4.3/css/aui-ie9.css" media="all"><![endif]-->
    </head>
    <body style="background-color: white;">
<span id="output">
<form class="aui ">
        <input type="password" id="password" class="password short-field" placeholder="Passphrase"> <button class="button aui" id="decrypt">Decrypt...</button>
</form>
</span>
    <script src="//crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/aes.js"></script>
    <script src="//crypto-js.googlecode.com/svn/tags/3.1.2/build/components/enc-base64-min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="//aui-cdn.atlassian.com/aui-adg/5.4.3/js/aui.js"></script>
    <!--[if lt IE 9]><script src="//aui-cdn.atlassian.com/aui-adg/5.4.3/js/aui-ie.js"></script><![endif]-->
    <script>
function getUrlVar(key){
    var result = new RegExp(key + "=([^&]*)", "i").exec(window.location.search);
    return result && unescape(result[1]) || "";
}

$.fn.textWidth = function(text, font) {
    if (!$.fn.textWidth.fakeEl) $.fn.textWidth.fakeEl = $('<span>').hide().appendTo(document.body);
    $.fn.textWidth.fakeEl.text(text || this.val() || this.text()).css('font', font || this.css('font'));
    return $.fn.textWidth.fakeEl.width();
};
$.fn.textHeight = function(text, font) {
    if (!$.fn.textWidth.fakeEl) $.fn.textWidth.fakeEl = $('<span>').hide().appendTo(document.body);
    $.fn.textWidth.fakeEl.text(text || this.val() || this.text()).css('font', font || this.css('font'));
    return $.fn.textWidth.fakeEl.height();
};


var hostBaseUrl = getUrlVar('xdm_e') + getUrlVar('cp');
var head = document.getElementsByTagName("head")[0];
var script = document.createElement("script");
script.type = "text/javascript";
script.src = hostBaseUrl +'/atlassian-connect/all.js';
script.setAttribute('data-options','base:true;resize:false;')
script.onreadystatechange = function () {
    if (this.readyState == 'complete') {
        main();
    }
};
script.onload = main;
head.appendChild(script);

function main() {
    $(document).ready(function() {
        AP.resize($("form").outerWidth(), $("form").outerHeight());
    });

    $(document).on("click", "#decrypt", function(event) {
        event.preventDefault();
        var message = getUrlVar("message");
        var decrypted = CryptoJS.AES.decrypt(message, $("#password").val()).toString(CryptoJS.enc.Utf8);;
        if (decrypted) {
            document.getElementById("output").innerText = decrypted;
            setTimeout(function() {
                AP.resize($("#output").textWidth(), $("#output").textHeight());
            }, 0);
        }
    });
}
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-49747277-1', 'jonmort.github.io');
  ga('send', 'pageview');

</script>
    </body>
</html>
